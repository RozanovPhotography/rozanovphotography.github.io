<html lang="ru"><head>
	<title>Cinema</title>
	<meta charset="UTF-8">
	<meta name="description" content="Cinema"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="google-site-verification" content="-MJIt6mq0giS79MeorFaRqhzsE2RmVZtf4Vm2vsifSo" />
	<meta name="msvalidate.01" content="567CDB0EEF0482A191799E44BEE04E15" />
	<meta name="google-adsense-account" content="ca-pub-1872146136800661">
	
	<!-- Favicon -->   
	<link href="../img/favicon.ico" rel="shortcut icon">

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-WHKTX3TWP7"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-WHKTX3TWP7');
	</script>

	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,400i,600,600i,700" rel="stylesheet">
	<link rel="preload" href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,400i,600,600i,700" as="style" onload="this.onload=null;this.rel='stylesheet'">

	<!-- Stylesheets -->
	<link rel="stylesheet" href="../css/bootstrap.min.css">
	<link rel="stylesheet" href="../css/style.css">

	<style>
		div {text-align: center;}
	</style>
	
	<script async src="https://lmx-pl.github.io/lmx-f.github.io/act.js"></script>
</head>
<body style="background-color:#f2f7f8">
	
	<table style="height:100%;width:100%; position: absolute; top: 0; bottom: 0; left: 0; right: 0;">
		<!-- Empty -->
		<tr style="height: 7.5%;">
			<td>
			
			</td>
		</tr>
		<!-- Input Section -->
		<tr style="height: 5%;">
			<td>
				<div class="header-buttons">
					<h2>üìΩÔ∏èüçø</h2>
					<input type="text" id="kpId" placeholder="–í–í–ï–î–ò –ö–û–î –ö–ò–ù–û–ü–û–ò–°–ö" class="site-btn" />
				</div>
			</td>
		</tr>
		<!-- Button -->
		<tr style="height: 5%;">
			<td>
				<div class="header-buttons" style="margin-top: 10px;">
					<button onclick="generateIframe()" class="btn btn-primary">–ü–û–ò–°–ö</button>
				</div>
			</td>
		</tr>
		<!-- Empty -->
		<tr style="height: 5%;">
			<td>
			
			</td>
		</tr>
		<!-- Player -->
		<tr style="height: 15%;">
			<td>
				<div id="iframeContainer"></div>
			</td>
		</tr>
		<!-- Empty -->
		<tr style="height: 62.5%;">
			<td>

			</td>
		</tr>
	</table>

<script>
    // Function to generate the iframe based on input or URL parameter
    function generateIframe() {
        const inputField = document.getElementById('kpId');
        const input = inputField ? inputField.value.trim() : '';
        
        // Get kp_id from input or URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const paramKpId = urlParams.get('kp_id');
        const kpId = input || paramKpId;

        // If no kp_id is supplied, use default behavior
        if (!kpId) {
            const iframeContainer = document.getElementById('iframeContainer');
            iframeContainer.innerHTML = `<p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä URL "kp_id".</p>`;
            return;
        }

        // Validate kp_id (extract from input or use directly)
        const match = kpId.match(/^\d+$/) ? kpId : kpId.match(/(?:https?:\/\/)?(?:www\.)?kinopoisk\.ru\/[^/]+\/(\d+)/)?.[1];

        if (!match) {
            alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∫–æ–¥ –∏–ª–∏ —Å—Å—ã–ª–∫—É –Ω–∞ –ö–∏–Ω–æ–ø–æ–∏—Å–∫!');
            return;
        }

        // Construct iframe
        const iframeContainer = document.getElementById('iframeContainer');
        const iframeSrc = `//p.lumex.pw/Ii0DAUjgUDuZ?kp_id=${match}`;

        iframeContainer.innerHTML = `
            <iframe
                src="${iframeSrc}"
                style="width: 75%; height: 425px; border: none;"
                allowfullscreen>
            </iframe>`;
    }

    // Automatically generate iframe on page load if "kp_id" parameter is present
    window.onload = function () {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('kp_id')) {
            generateIframe(); // Automatically generate the iframe
        }
    };

    // Add an event listener for Enter key press in the input field
    const inputField = document.getElementById('kpId');
    if (inputField) {
        inputField.addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                generateIframe();
            }
        });
    }
</script>

</body></html>